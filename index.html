<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>thread.js by h2non</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>thread.js</h1>
        <p>The definitive library for real parallel non-blocking threads in the browser</p>
        <p class="view"><a href="https://github.com/h2non/thread.js">View the Project on GitHub <small>h2non/thread.js</small></a></p>
        <ul>
          <li><a href="https://github.com/h2non/thread.js/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/h2non/thread.js/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/h2non/thread.js">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <p><strong>thread.js</strong> is lightweight and rich featured library that <strong>simplifies JavaScript parallel computing in browser</strong>
environments through a clean and elegant <a href="#api">API</a> with promise-based asynchronous handling</p>

<p>It allows you to run tasks in a non-blocking real thread in a really simple way.
It also provides built-in support for creating pool of threads to distribute the
task load across multiple workers transparently using a simple best availability schedule algorithm</p>

<p>It uses <a href="http://en.wikipedia.org/wiki/Web_worker">Web Workers</a> to create real threads,
but provides fallback support for older browsers based on an <code>iframe</code> hack</p>

<p>Welcome to the multithreading world in the browser, now made simple and funny</p>

<p>Getting started with <a href="#basic-usage">basic usage</a>,
some <a href="https://github.com/h2non/thread.js/tree/master/examples">examples</a> or <a href="https://github.com/h2non/thread.js/tree/master/test">tests</a> and be aware about <a href="#threads-limitations">threads limitations</a></p>

<h2>
<a name="installation" class="anchor" href="#installation"><span class="octicon octicon-link"></span></a>Installation</h2>

<p>Via <a href="http://bower.io">Bower</a></p>

<div class="highlight highlight-bash"><pre>bower install thread
</pre></div>

<p>Via <a href="http://component.io/">Component</a></p>

<div class="highlight highlight-bash"><pre>component install h2non/thread.js
</pre></div>

<p>Or loading the script remotely</p>

<div class="highlight highlight-html"><pre><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"//cdn.rawgit.com/h2non/thread.js/0.1.1/thread.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
</pre></div>

<h3>
<a name="environments" class="anchor" href="#environments"><span class="octicon octicon-link"></span></a>Environments</h3>

<p>Cross-browser support guaranteed running tests in <a href="http://browserstack.com/">BrowserStack</a></p>

<ul>
<li>Chrome &gt;= 5</li>
<li>Firefox &gt;= 3</li>
<li>Safari &gt;= 5</li>
<li>Opera &gt;= 10</li>
<li>IE &gt;= 8</li>
</ul><h3>
<a name="basic-usage" class="anchor" href="#basic-usage"><span class="octicon octicon-link"></span></a>Basic usage</h3>

<p>If <code>require</code> is available, you must use it to fetch the module.
Otherwise it will be available as global</p>

<div class="highlight highlight-js"><pre><span class="kd">var</span> <span class="nx">thread</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'thread'</span><span class="p">)</span>
</pre></div>

<p>Create a new thread with custom scope environment and import external libraries</p>

<div class="highlight highlight-js"><pre><span class="kd">var</span> <span class="nx">worker</span> <span class="o">=</span> <span class="nx">thread</span><span class="p">({</span>
  <span class="nx">env</span><span class="o">:</span> <span class="p">{</span> <span class="nx">numbers</span><span class="o">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span> <span class="p">},</span>
  <span class="nx">require</span><span class="o">:</span> <span class="p">[</span>
    <span class="s1">'http://cdnjs.cloudflare.com/ajax/libs/lodash.js/2.4.1/lodash.js'</span>
  <span class="p">]</span>
<span class="p">})</span>
</pre></div>

<p>Synchronous example</p>

<div class="highlight highlight-js"><pre><span class="kd">var</span> <span class="nx">task</span> <span class="o">=</span> <span class="nx">worker</span><span class="p">.</span><span class="nx">run</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">_</span><span class="p">.</span><span class="nx">sortBy</span><span class="p">(</span><span class="nx">env</span><span class="p">.</span><span class="nx">numbers</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">num</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">num</span><span class="p">)</span>
  <span class="p">})</span>
<span class="p">})</span>
</pre></div>

<p>Asynchronous example</p>

<div class="highlight highlight-js"><pre><span class="kd">var</span> <span class="nx">task</span> <span class="o">=</span> <span class="nx">worker</span><span class="p">.</span><span class="nx">run</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">done</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">doAsyncStuff</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">sorted</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">sortBy</span><span class="p">(</span><span class="nx">env</span><span class="p">.</span><span class="nx">numbers</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">num</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">num</span><span class="p">)</span>
    <span class="p">})</span>
    <span class="nx">done</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">sorted</span><span class="p">)</span>
  <span class="p">})</span>
<span class="p">})</span>
</pre></div>

<p>Consuming the computed result (promise-based API)</p>

<div class="highlight highlight-js"><pre><span class="nx">task</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">array</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">array</span><span class="p">)</span> <span class="c1">// -&gt; [3, 1, 2]</span>
<span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Ups:'</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">message</span><span class="p">)</span>
<span class="p">}).</span><span class="k">finally</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Final result:'</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="c1">// -&gt; [3, 1, 2]</span>
<span class="p">})</span>
</pre></div>

<h2>
<a name="web-workers-resources" class="anchor" href="#web-workers-resources"><span class="octicon octicon-link"></span></a>Web Workers resources</h2>

<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/Guide/Performance/Using_web_workers">Basics</a></li>
<li><a href="http://www.html5rocks.com/es/tutorials/workers/basics/">HTML5Rocks Tutorial</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Worker/Functions_and_classes_available_to_workers">Functions available to workers as global scope</a></li>
<li><a href="http://www.html5rocks.com/en/tutorials/security/content-security-policy/">Origin policy restrictions</a></li>
<li><a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/workers.html">Specification</a></li>
</ul><h2>
<a name="threads-limitations" class="anchor" href="#threads-limitations"><span class="octicon octicon-link"></span></a>Threads limitations</h2>

<p>You should be aware of some limitations while using threads</p>

<p>Threads has it's own isolated scope. That means you must explicitly bind values or functions
to the thread in order to consum them.
Any passed value to the thread scope will be cloned (it will be passed by value, not by reference),
so mutation is not possible between scopes</p>

<p>If you create a pool of threads, you must consider that threads in the pool are scope-isolated too.
In other words, it's not supported scope synchronization between threads in the pool.
That is positive becouse you cannot have side-effects between threads,
but should be aware about global scope dependencies and mutation in your code in other to avoid inconsistency between threads</p>

<p>All values passed to must be JSON-serializable, meaning only primitives types, raw objects and functions.
Same with return values from threads.
DOM nodes, built-in objects or prototypes chains cannot be passed to the thread</p>

<p>Additionally, threads do not have access to the DOM API</p>

<h2>
<a name="api" class="anchor" href="#api"><span class="octicon octicon-link"></span></a>API</h2>

<h3>
<a name="threadoptions" class="anchor" href="#threadoptions"><span class="octicon octicon-link"></span></a>thread([options])</h3>

<p>Return: <code>thread</code> Alias: <code>thread.create</code></p>

<p>Supported options:</p>

<ul>
<li>
<strong>env</strong> <code>object</code> Custom environment to bind to the isolated thread scope</li>
<li>
<strong>require</strong> <code>string|array|object</code> Source path scripts to load or map of values/functions to bind</li>
<li>
<strong>namespace</strong> <code>string</code> Global namespace to allocate the scope environment. Default to <code>env</code>
</li>
</ul><div class="highlight highlight-js"><pre><span class="nx">thread</span><span class="p">({</span>
  <span class="nx">namespace</span><span class="o">:</span> <span class="s1">'global'</span><span class="p">,</span>
  <span class="nx">env</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">x</span><span class="o">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="nx">sqrt</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="nx">n</span><span class="p">,</span> <span class="nx">n</span><span class="p">))</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nx">require</span><span class="o">:</span> <span class="p">[</span>
    <span class="s1">'http://cdn.rawgit.com/h2non/hu/0.1.1/hu.js'</span>
  <span class="p">]</span>
<span class="p">})</span>
</pre></div>

<h4>
<a name="threadrunfn-env-args" class="anchor" href="#threadrunfn-env-args"><span class="octicon octicon-link"></span></a>thread#run(fn, env, args)</h4>

<p>Return: <code>task</code> Alias: <code>exec</code></p>

<p>Run the given function in the thread isolated scope.
You can optionally bind a custom context (as <code>map</code> of values) or passing function arguments
(as <code>array</code>) to be injected when the function will be invoked</p>

<p>Bind values must be serializable types (see <a href="#threads-limitations">threads limitations</a>)</p>

<p>Run a function and return the result synchronously (<code>return</code> statement required)</p>

<div class="highlight highlight-js"><pre><span class="nx">thread</span><span class="p">().</span><span class="nx">run</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="mi">2</span> <span class="o">*</span> <span class="mi">2</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="c1">// -&gt; 4</span>
<span class="p">})</span>
</pre></div>

<p>Binding a custom context and return the result asynchronously</p>

<div class="highlight highlight-js"><pre><span class="nx">thread</span><span class="p">().</span><span class="nx">run</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">done</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">done</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">x</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>
<span class="p">},</span> <span class="p">{</span> <span class="nx">x</span><span class="o">:</span> <span class="mi">2</span> <span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="c1">// -&gt; 4</span>
<span class="p">})</span>
</pre></div>

<p>Passing arguments and return the result asynchronously</p>

<div class="highlight highlight-js"><pre><span class="nx">thread</span><span class="p">().</span><span class="nx">run</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">num</span><span class="p">,</span> <span class="nx">done</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">done</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">num</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">x</span><span class="p">)</span>
<span class="p">},</span> <span class="p">{</span> <span class="nx">x</span><span class="o">:</span> <span class="mi">2</span> <span class="p">},</span> <span class="p">[</span> <span class="mi">2</span> <span class="p">]).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="c1">// -&gt; 4</span>
<span class="p">})</span>
</pre></div>

<h4>
<a name="threadpoolnumber" class="anchor" href="#threadpoolnumber"><span class="octicon octicon-link"></span></a>thread#pool(number)</h4>

<p>Return: <code>thread</code></p>

<p>Create a pool of a maximum number of threads and run tasks across them</p>

<p>It implements a simple best availability scheudle algorithm to transparently
distribute tasks across multiple workers.
It will only create a new thread if it's required and there is not any other thread available</p>

<p>This feature is still beta and major improvements will be done in future releases.
Any feedback will be really appreciated</p>

<div class="highlight highlight-js"><pre><span class="c1">// create a pool with a maximum of 10 threads</span>
<span class="kd">var</span> <span class="nx">pool</span> <span class="o">=</span> <span class="nx">thread</span><span class="p">({</span> <span class="nx">env</span><span class="o">:</span> <span class="p">{</span> <span class="nx">x</span><span class="o">:</span> <span class="mi">2</span> <span class="p">}</span> <span class="p">}).</span><span class="nx">pool</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">count</span> <span class="o">=</span> <span class="mi">1</span>
<span class="kd">var</span> <span class="nx">tasks</span> <span class="o">=</span> <span class="mi">50</span>

<span class="kd">function</span> <span class="nx">runAsyncTask</span><span class="p">(</span><span class="nx">num</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">pool</span><span class="p">.</span><span class="nx">run</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">done</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="nx">done</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">env</span><span class="p">.</span><span class="nx">x</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>
      <span class="p">},</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">)</span>
    <span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Task:'</span><span class="p">,</span> <span class="nx">num</span><span class="p">,</span> <span class="s1">'- Result:'</span><span class="p">,</span> <span class="nx">result</span><span class="p">,</span> <span class="s1">'- Used threads:'</span><span class="p">,</span> <span class="nx">pool</span><span class="p">.</span><span class="nx">threadPool</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">count</span><span class="o">++</span> <span class="o">===</span> <span class="nx">tasks</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Tasks finished'</span><span class="p">)</span>
        <span class="nx">pool</span><span class="p">.</span><span class="nx">kill</span><span class="p">()</span> <span class="c1">// kill all pool threads</span>
      <span class="p">}</span>
    <span class="p">})</span>
  <span class="p">},</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">)</span>
<span class="p">}</span>

<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">tasks</span><span class="p">;</span> <span class="nx">i</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">runAsyncTask</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>

<h4>
<a name="threadbindobj" class="anchor" href="#threadbindobj"><span class="octicon octicon-link"></span></a>thread#bind(obj)</h4>

<p>Return: <code>thread</code> Alias: <code>set</code></p>

<p>Bind a map of values to the isolated thread scope.
You can do the same passing an object via <code>thread#require()</code></p>

<p>Passed values will be exposed in the global namespace (default to <code>env</code>)</p>

<div class="highlight highlight-js"><pre><span class="kd">var</span> <span class="nx">task</span> <span class="o">=</span> <span class="nx">thread</span><span class="p">().</span><span class="nx">bind</span><span class="p">({</span>
  <span class="nx">num</span><span class="o">:</span> <span class="mi">4</span><span class="p">,</span>
  <span class="nx">list</span><span class="o">:</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span>
  <span class="nx">defer</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">fn</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">fn</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">})</span>

<span class="nx">task</span><span class="p">.</span><span class="nx">run</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">done</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">env</span><span class="p">.</span><span class="nx">defer</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">done</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">env</span><span class="p">.</span><span class="nx">list</span><span class="p">.</span><span class="nx">reverse</span><span class="p">().</span><span class="nx">push</span><span class="p">(</span><span class="nx">env</span><span class="p">.</span><span class="nx">num</span><span class="p">))</span>
  <span class="p">})</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="c1">// -&gt; [1,2,3,4]</span>
<span class="p">})</span>
</pre></div>

<h4>
<a name="threadrequiresources" class="anchor" href="#threadrequiresources"><span class="octicon octicon-link"></span></a>thread#require(sources)</h4>

<p>Return: <code>thread</code> Alias: <code>import</code></p>

<p>Load remote scripts from a valid URL, bind an object or functions to the thread isolated scope.
Passed values will be exposed in the global namespace (default to <code>env</code>)</p>

<p>Importing a remote script</p>

<div class="highlight highlight-js"><pre><span class="nx">thread</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s1">'http://cdn.rawgit.com/h2non/hu/0.1.1/hu.js'</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">run</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">typeof</span> <span class="nx">hu</span> <span class="o">===</span> <span class="s1">'object'</span>
  <span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">exists</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">exists</span><span class="p">)</span> <span class="c1">// -&gt; true</span>
  <span class="p">})</span>
</pre></div>

<p>Or multiple scripts</p>

<div class="highlight highlight-js"><pre><span class="nx">thread</span><span class="p">().</span><span class="nx">require</span><span class="p">([</span>
  <span class="s1">'http://cdn.rawgit.com/h2non/hu/0.1.1/hu.js'</span><span class="p">,</span>
  <span class="s1">'http://cdn.rawgit.com/h2non/fw/0.1.2/fw.js'</span>
<span class="p">])</span>
</pre></div>

<p>Binding custom objects and primitives types (does the same as <code>bind()</code>)</p>

<div class="highlight highlight-js"><pre><span class="nx">thread</span><span class="p">().</span><span class="nx">require</span><span class="p">({</span>
  <span class="nx">list</span><span class="o">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">],</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s1">'John'</span><span class="p">,</span>
  <span class="nx">age</span><span class="o">:</span> <span class="mi">28</span><span class="p">,</span>
  <span class="nx">time</span><span class="o">:</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">()</span>
<span class="p">})</span>
</pre></div>

<p>Binding functions</p>

<div class="highlight highlight-js"><pre><span class="nx">thread</span><span class="p">().</span><span class="nx">require</span><span class="p">({</span>
  <span class="nx">defer</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">fn</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">fn</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
  <span class="p">},</span>
  <span class="nx">transform</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">arr</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">arr</span><span class="p">.</span><span class="nx">reverse</span><span class="p">().</span><span class="nx">filter</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">num</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">num</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">num</span> <span class="o">&lt;</span> <span class="mi">100</span>
    <span class="p">})</span>
  <span class="p">}</span>
<span class="p">})</span>
</pre></div>

<p>Bind values will be available in the global namespace object (default to <code>env</code>)</p>

<h4>
<a name="threadflush" class="anchor" href="#threadflush"><span class="octicon octicon-link"></span></a>thread#flush()</h4>

<p>Return: <code>thread</code></p>

<p>Flush the thread cached data and scope environment.
If you flush the data, you will need</p>

<div class="highlight highlight-js"><pre><span class="kd">var</span> <span class="nx">worker</span> <span class="o">=</span> <span class="nx">thread</span><span class="p">({</span> <span class="nx">env</span><span class="o">:</span> <span class="p">{</span> <span class="nx">x</span><span class="o">:</span> <span class="mi">2</span> <span class="p">}</span> <span class="p">}).</span><span class="nx">flush</span><span class="p">()</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">worker</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">env</span><span class="p">).</span><span class="nx">length</span><span class="p">)</span> <span class="c1">// -&gt; 0</span>
</pre></div>

<h4>
<a name="threadflushtasks" class="anchor" href="#threadflushtasks"><span class="octicon octicon-link"></span></a>thread#flushTasks()</h4>

<p>Return: <code>thread</code></p>

<p>Flush running tasks promises and clean cached values</p>

<div class="highlight highlight-js"><pre><span class="kd">var</span> <span class="nx">worker</span> <span class="o">=</span> <span class="nx">thread</span><span class="p">()</span>
<span class="nx">worker</span><span class="p">.</span><span class="nx">run</span><span class="p">(</span><span class="nx">doLongTask</span><span class="p">)</span>
<span class="nx">worker</span><span class="p">.</span><span class="nx">flushTasks</span><span class="p">()</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">worker</span><span class="p">.</span><span class="nx">pending</span><span class="p">())</span> <span class="c1">// -&gt; 0</span>
</pre></div>

<h4>
<a name="threadsendmsg" class="anchor" href="#threadsendmsg"><span class="octicon octicon-link"></span></a>thread#send(msg)</h4>

<p>Return: <code>thread</code></p>

<p>Send a message directly to the current thread.
Useful for specific use cases, but it's preferably do not use it directly.
Use the <code>run()</code> abstraction instead</p>

<p>Be aware about passing non-serialize data types such as native JavaScript objects,
DOM nodes, objects with self-references... (see threads <a href="https://github.com/h2non/thread.js#threads-limitations">limitations</a>)</p>

<div class="highlight highlight-js"><pre><span class="kd">var</span> <span class="nx">worker</span> <span class="o">=</span> <span class="nx">thread</span><span class="p">()</span>
<span class="nx">worker</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">'msg'</span><span class="p">,</span> <span class="nx">data</span><span class="o">:</span> <span class="s1">'hello world'</span> <span class="p">})</span>
</pre></div>

<h4>
<a name="threadkill" class="anchor" href="#threadkill"><span class="octicon octicon-link"></span></a>thread#kill()</h4>

<p>Return: <code>thread</code> Alias: <code>terminate</code></p>

<p>Kill the current thread. All the cached data, scope environment and config options will be flushed,
including in worker isolated scope</p>

<p>It's recommended you explicit kill any unused thread in order to avoid memory issues in long term computations</p>

<div class="highlight highlight-js"><pre><span class="kd">var</span> <span class="nx">worker</span> <span class="o">=</span> <span class="nx">thread</span><span class="p">()</span>
<span class="nx">worker</span><span class="p">.</span><span class="nx">run</span><span class="p">(</span><span class="nx">longTask</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="nx">worker</span><span class="p">.</span><span class="nx">kill</span><span class="p">()</span>
<span class="p">})</span>
</pre></div>

<h4>
<a name="threadstartoptions" class="anchor" href="#threadstartoptions"><span class="octicon octicon-link"></span></a>thread#start([options])</h4>

<p>Return: <code>thread</code></p>

<p>Start (or restart) the current thread.
If the thread was previously killed, you can reuse it calling this method</p>

<div class="highlight highlight-js"><pre><span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">env</span><span class="o">:</span> <span class="p">{</span> <span class="nx">x</span><span class="o">:</span> <span class="mi">2</span> <span class="p">}</span> <span class="p">}</span>
<span class="kd">var</span> <span class="nx">worker</span> <span class="o">=</span> <span class="nx">thread</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span>
<span class="nx">worker</span><span class="p">.</span><span class="nx">kill</span><span class="p">()</span> <span class="c1">// explicit kill</span>
<span class="nx">worker</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span> <span class="c1">// explicit re-start, passing the same options</span>
</pre></div>

<h4>
<a name="threadpending" class="anchor" href="#threadpending"><span class="octicon octicon-link"></span></a>thread#pending()</h4>

<p>Return: <code>number</code></p>

<p>Return the pending running tasks on the current thread</p>

<div class="highlight highlight-js"><pre><span class="kd">var</span> <span class="nx">worker</span> <span class="o">=</span> <span class="nx">thread</span><span class="p">()</span>
<span class="kd">var</span> <span class="nx">task</span> <span class="o">=</span> <span class="nx">worker</span><span class="p">.</span><span class="nx">run</span><span class="p">(</span><span class="nx">longAsyncTask</span><span class="p">)</span>
<span class="nx">worker</span><span class="p">.</span><span class="nx">pending</span><span class="p">()</span> <span class="c1">// -&gt; 1</span>
<span class="nx">task</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="nx">worker</span><span class="p">.</span><span class="nx">pending</span><span class="p">()</span> <span class="c1">// -&gt; 0</span>
<span class="p">})</span>
</pre></div>

<h4>
<a name="threadrunning" class="anchor" href="#threadrunning"><span class="octicon octicon-link"></span></a>thread#running()</h4>

<p>Return: <code>boolean</code></p>

<p>Return <code>true</code> if the current thread has running tasks</p>

<div class="highlight highlight-js"><pre><span class="nx">thread</span><span class="p">().</span><span class="nx">run</span><span class="p">(</span><span class="nx">longAsyncTask</span><span class="p">).</span><span class="nx">running</span><span class="p">()</span> <span class="c1">// -&gt; true</span>
<span class="nx">thread</span><span class="p">().</span><span class="nx">run</span><span class="p">(</span><span class="nx">tinySyncTask</span><span class="p">).</span><span class="nx">running</span><span class="p">()</span> <span class="c1">// -&gt; false</span>
</pre></div>

<h4>
<a name="threadidle" class="anchor" href="#threadidle"><span class="octicon octicon-link"></span></a>thread#idle()</h4>

<p>Return: <code>boolean</code> Alias: <code>sleeping</code></p>

<p>Return <code>true</code> if the current thread is in idle state.</p>

<p>A thread will be considered in idle state if its latest executed task exceeds from the <a href="#threadidletime">idleTime</a>.
By default, the idle time will be 30 seconds</p>

<div class="highlight highlight-js"><pre><span class="kd">var</span> <span class="nx">worker</span> <span class="o">=</span> <span class="nx">thread</span><span class="p">()</span>
<span class="nx">worker</span><span class="p">.</span><span class="nx">idleTime</span> <span class="o">=</span> <span class="mi">1000</span> <span class="c1">// set max 1 second</span>
<span class="kd">var</span> <span class="nx">task</span> <span class="o">=</span> <span class="nx">worker</span><span class="p">.</span><span class="nx">run</span><span class="p">(</span><span class="nx">someTask</span><span class="p">)</span>
<span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="c1">// after idle time exceeds, the thread will be in idle state</span>
  <span class="nx">worker</span><span class="p">.</span><span class="nx">idle</span><span class="p">()</span> <span class="c1">// -&gt; true</span>
<span class="p">},</span> <span class="mi">2000</span><span class="p">)</span>
</pre></div>

<h4>
<a name="threadterminated" class="anchor" href="#threadterminated"><span class="octicon octicon-link"></span></a>thread#terminated</h4>

<p>Type: <code>boolean</code></p>

<p>Expose the thread run state</p>

<div class="highlight highlight-js"><pre><span class="nx">thread</span><span class="p">().</span><span class="nx">terminated</span> <span class="c1">// -&gt; false</span>
<span class="nx">thread</span><span class="p">().</span><span class="nx">kill</span><span class="p">().</span><span class="nx">terminated</span> <span class="c1">// -&gt; true</span>
</pre></div>

<h4>
<a name="threadontype-handler" class="anchor" href="#threadontype-handler"><span class="octicon octicon-link"></span></a>thread#on(type, handler)</h4>

<p>Return: <code>thread</code> Alias: <code>addEventListener</code></p>

<p>Add a custom worker event handler. By default you don't need to handle
events directly, use it only for exceptional specific purposes</p>

<p>Supported event types are <code>error</code> and <code>message</code></p>

<h4>
<a name="threadofftype-handler" class="anchor" href="#threadofftype-handler"><span class="octicon octicon-link"></span></a>thread#off(type, handler)</h4>

<p>Return: <code>thread</code> Alias: <code>removeEventListener</code></p>

<p>Remove a worker event listener.
It's required to pass the original handler function in order to remove it</p>

<h4>
<a name="threadmaxtaskdelay" class="anchor" href="#threadmaxtaskdelay"><span class="octicon octicon-link"></span></a>thread#maxTaskDelay</h4>

<p>Type: <code>number</code> Default: <code>0</code></p>

<p>The maximum amount of time that a task can take in miliseconds.
If the task computation time exceed, it will be exit as error.</p>

<p>By default this feature is disabled in order to avoid unnecessary computations</p>

<p>This value will be applied to every task which runs in the current thread or a pool of threads</p>

<div class="highlight highlight-js"><pre><span class="kd">var</span> <span class="nx">worker</span> <span class="o">=</span> <span class="nx">thread</span><span class="p">()</span>
<span class="nx">worker</span><span class="p">.</span><span class="nx">maxTaskDelay</span> <span class="o">=</span> <span class="mi">1000</span>
<span class="nx">worker</span><span class="p">.</span><span class="nx">run</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">done</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">done</span><span class="p">,</span> <span class="mi">2000</span><span class="p">)</span>
<span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">message</span><span class="p">)</span> <span class="c1">// -&gt; task execution time exceeded</span>
<span class="p">})</span>
</pre></div>

<h4>
<a name="threadidletime" class="anchor" href="#threadidletime"><span class="octicon octicon-link"></span></a>thread#idleTime</h4>

<p>Type: <code>number</code> Default: <code>30000</code></p>

<p>The minimum time in milliseconds that a thread is considered in sleeping (idle) state</p>

<h4>
<a name="threadispool" class="anchor" href="#threadispool"><span class="octicon octicon-link"></span></a>thread#isPool</h4>

<p>Type: <code>boolean</code></p>

<p>Check if the current <code>thread</code> instance is a pool of threads</p>

<div class="highlight highlight-js"><pre><span class="kd">var</span> <span class="nx">pool</span> <span class="o">=</span> <span class="nx">thread</span><span class="p">().</span><span class="nx">pool</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="nx">pool</span><span class="p">.</span><span class="nx">isPool</span> <span class="c1">// -&gt; true</span>
</pre></div>

<h3>
<a name="threadtaskthread--env" class="anchor" href="#threadtaskthread--env"><span class="octicon octicon-link"></span></a>thread.Task(thread [, env])</h3>

<p>Return: <code>task</code></p>

<p>Create a new task in the given thread</p>

<p>Normally you don't need to call it directly, it will done via <code>thread.run()</code> factory</p>

<div class="highlight highlight-js"><pre><span class="kd">var</span> <span class="nx">worker</span> <span class="o">=</span> <span class="nx">thread</span><span class="p">({</span> <span class="nx">env</span><span class="o">:</span> <span class="p">{</span> <span class="nx">x</span><span class="o">:</span> <span class="mi">2</span> <span class="p">}})</span>
<span class="kd">var</span> <span class="nx">task</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">thread</span><span class="p">.</span><span class="nx">Task</span><span class="p">(</span><span class="nx">worker</span><span class="p">,</span> <span class="p">{</span> <span class="nx">y</span><span class="o">:</span> <span class="mi">2</span> <span class="p">})</span>
<span class="nx">task</span><span class="p">.</span><span class="nx">run</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">env</span><span class="p">.</span><span class="nx">x</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">y</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="c1">// -&gt; 4</span>
<span class="p">})</span>
</pre></div>

<h4>
<a name="taskthensuccessfn--errorfn" class="anchor" href="#taskthensuccessfn--errorfn"><span class="octicon octicon-link"></span></a>Task#then(successFn [, errorFn])</h4>

<p>Return: <code>task</code></p>

<p>Add success and error (optionally) result handlers for the current task</p>

<div class="highlight highlight-js"><pre><span class="kd">var</span> <span class="nx">worker</span> <span class="o">=</span> <span class="nx">thread</span><span class="p">()</span>
<span class="nx">vas</span> <span class="nx">task</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">thread</span><span class="p">.</span><span class="nx">Task</span><span class="p">(</span><span class="nx">worker</span><span class="p">)</span>
<span class="nx">task</span><span class="p">.</span><span class="nx">run</span><span class="p">(</span><span class="nx">longAsyncTask</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span>
<span class="p">})</span>
</pre></div>

<h4>
<a name="taskcatcherrorfn" class="anchor" href="#taskcatcherrorfn"><span class="octicon octicon-link"></span></a>Task#catch(errorFn)</h4>

<p>Return: <code>task</code></p>

<p>Add an error handlers for the current task</p>

<div class="highlight highlight-js"><pre><span class="kd">var</span> <span class="nx">worker</span> <span class="o">=</span> <span class="nx">thread</span><span class="p">()</span>
<span class="nx">vas</span> <span class="nx">task</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">thread</span><span class="p">.</span><span class="nx">Task</span><span class="p">(</span><span class="nx">worker</span><span class="p">)</span>
<span class="nx">task</span><span class="p">.</span><span class="nx">run</span><span class="p">(</span><span class="nx">longAsyncTask</span><span class="p">).</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
<span class="p">})</span>
</pre></div>

<h4>
<a name="taskfinallyfinalfn" class="anchor" href="#taskfinallyfinalfn"><span class="octicon octicon-link"></span></a>Task#finally(finalFn)</h4>

<p>Return: <code>task</code></p>

<p>Add a final handler for the current task.
It will be ejecuted when the task finished with <code>success</code> or <code>error</code> state</p>

<div class="highlight highlight-js"><pre><span class="kd">var</span> <span class="nx">worker</span> <span class="o">=</span> <span class="nx">thread</span><span class="p">()</span>
<span class="nx">vas</span> <span class="nx">task</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">thread</span><span class="p">.</span><span class="nx">Task</span><span class="p">(</span><span class="nx">worker</span><span class="p">)</span>
<span class="nx">task</span><span class="p">.</span><span class="nx">run</span><span class="p">(</span><span class="nx">longAsyncTask</span><span class="p">).</span><span class="k">finally</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span>
<span class="p">})</span>
</pre></div>

<h4>
<a name="taskbindobj" class="anchor" href="#taskbindobj"><span class="octicon octicon-link"></span></a>Task#bind(obj)</h4>

<p>Return: <code>task</code></p>

<p>Bind custom map environment to the current task scope</p>

<div class="highlight highlight-js"><pre><span class="kd">var</span> <span class="nx">worker</span> <span class="o">=</span> <span class="nx">thread</span><span class="p">()</span>
<span class="nx">vas</span> <span class="nx">task</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">thread</span><span class="p">.</span><span class="nx">Task</span><span class="p">(</span><span class="nx">worker</span><span class="p">)</span>
<span class="nx">task</span><span class="p">.</span><span class="nx">bind</span><span class="p">({</span> <span class="nx">x</span><span class="o">:</span> <span class="mi">2</span> <span class="p">})</span>
<span class="nx">task</span><span class="p">.</span><span class="nx">run</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">x</span> <span class="o">*</span> <span class="mi">2</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="c1">// -&gt; 4</span>
<span class="p">})</span>
</pre></div>

<h4>
<a name="taskflush" class="anchor" href="#taskflush"><span class="octicon octicon-link"></span></a>Task#flush()</h4>

<p>Return: <code>task</code></p>

<p>Flush cached result data and set the initial task state</p>

<div class="highlight highlight-js"><pre><span class="kd">var</span> <span class="nx">worker</span> <span class="o">=</span> <span class="nx">thread</span><span class="p">()</span>
<span class="nx">vas</span> <span class="nx">task</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">thread</span><span class="p">.</span><span class="nx">Task</span><span class="p">(</span><span class="nx">worker</span><span class="p">)</span>
<span class="nx">task</span><span class="p">.</span><span class="nx">flush</span><span class="p">()</span>
<span class="nx">task</span><span class="p">.</span><span class="nx">flushed</span><span class="p">()</span> <span class="c1">// -&gt; true</span>
</pre></div>

<h4>
<a name="taskflushed" class="anchor" href="#taskflushed"><span class="octicon octicon-link"></span></a>Task#flushed()</h4>

<p>Return: <code>boolean</code></p>

<p>Return <code>true</code> if task data was already flushed</p>

<h3>
<a name="static-members" class="anchor" href="#static-members"><span class="octicon octicon-link"></span></a>Static members</h3>

<h4>
<a name="threadtotal" class="anchor" href="#threadtotal"><span class="octicon octicon-link"></span></a>thread.total()</h4>

<p>Return: <code>number</code></p>

<p>Return the total number of threads created (running and idle)</p>

<h4>
<a name="threadall" class="anchor" href="#threadall"><span class="octicon octicon-link"></span></a>thread.all()</h4>

<p>Return: <code>array</code></p>

<p>Return an array with all created threads</p>

<h4>
<a name="threadrunning-1" class="anchor" href="#threadrunning-1"><span class="octicon octicon-link"></span></a>thread.running()</h4>

<p>Return: <code>array</code></p>

<p>Return an <code>array</code> of the running threads (are processing one or more tasks)</p>

<h4>
<a name="threadidle-1" class="anchor" href="#threadidle-1"><span class="octicon octicon-link"></span></a>thread.idle()</h4>

<p>Return: <code>array</code></p>

<p>Return an <code>array</code> of the idle threads (thread which has no execute tasks for a long time)</p>

<h4>
<a name="threadkillall" class="anchor" href="#threadkillall"><span class="octicon octicon-link"></span></a>thread.killAll()</h4>

<p>Alias: <code>terminateAll</code></p>

<p>Kill all the existent threads</p>

<h4>
<a name="threadflush-1" class="anchor" href="#threadflush-1"><span class="octicon octicon-link"></span></a>thread.flush()</h4>

<p>Flush the built-in threads store manager (but they will not be killed)</p>

<h4>
<a name="threadversion" class="anchor" href="#threadversion"><span class="octicon octicon-link"></span></a>thread.VERSION</h4>

<p>Type: <code>string</code></p>

<p>Current library semantic version</p>

<h2>
<a name="contributing" class="anchor" href="#contributing"><span class="octicon octicon-link"></span></a>Contributing</h2>

<p>Wanna help? Cool! It will be appreciated :)</p>

<p>You must add new test cases for any new feature or refactor you do,
always following the same design/code patterns that already exist</p>

<h3>
<a name="development" class="anchor" href="#development"><span class="octicon octicon-link"></span></a>Development</h3>

<p>Only <a href="http://nodejs.org">node.js</a> is required for development</p>

<p>Clone the repository</p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>git clone https://github.com/h2non/thread.js.git <span class="o">&amp;&amp;</span> <span class="nb">cd </span>thread.js
</pre></div>

<p>Install dependencies</p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>npm install
</pre></div>

<p>Generate browser bundle source</p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>make browser
</pre></div>

<p>Run tests</p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>make <span class="nb">test</span>
</pre></div>

<p>See the <a href="http://localhost:8080/examples">examples</a></p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>./node_modules/.bin/http-server
</pre></div>

<h2>
<a name="license" class="anchor" href="#license"><span class="octicon octicon-link"></span></a>License</h2>

<p><a href="http://opensource.org/licenses/MIT">MIT</a>  Tomas Aparicio</p>
      </section>
    </div>
    <footer>
      <p>Project maintained by <a href="https://github.com/h2non">h2non</a></p>
      <p>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></p>
    </footer>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
  </body>
</html>
